.well
  .row
    .col-sm-12
      = form_for @search, url: "/scan/#{@scan.secure_id}", method: :get, html: { class: "form-inline" } do |f|
        .form-group
          %a.btn.btn-success{ href: "/scan/#{@scan.secure_id}/edit" } Add Signatures
        .form-group
          %select.form-control{ name: "q[solar_system_id_eq]"}
            %option{ value: "" } All Systems
            - if request.headers["HTTP_EVE_TRUSTED"] == "Yes"
              %option{ value: request.headers["HTTP_EVE_SOLARSYSTEMID"] } Current System
            - @scan.sigs.select(:system_id).distinct.each do |system|
              %option{ value: system.system_id, selected: selected_system(system.system_id.to_s) }= system.solar_system.name
        = f.submit "Filter", class: "btn btn-main"
        / /.row
        / .col-sm-5
        /   .input-group
        /     .input-group-btn
        /       = f.button "Current System", class: "btn btn-main", name: :solar_system_name_eq
        /       = f.text_field :sig_type_name_eq, class: "form-control"
        %br
        %p
        %label Group filter
        - SigGroup.all.each do |group|
          = check_box_tag "q[sig_group_id_in][]", group.id, checked_group(group.id)
          %label= type_to_color group.name
  %p
  %table.table.table-striped.table-condensed
    %thead
      %tr
        %th
          = sort_link @search, :solar_system_name, "System"
        %th
          = sort_link @search, :sid, "ID"
        %th
          = sort_link @search, :sig_group_name, "Group"
        %th
          = sort_link @search, :sig_type_name, "Type"
    %tbody
      - @sigs.each do |sig|
        %tr
          %td
            = sig.solar_system.name
          %td
            = sig.sid
          %td
            = type_to_color sig.sig_group.name
          %td
            = sig.sig_type.name
  
  = paginate @sigs